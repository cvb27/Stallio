
{% extends "admin/layout.html" %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-3">Billing</h2>

  {# Normaliza status por si viene None/vacío #}
  {% set status = (subscription_status or "inactive") | trim %}
  {% set is_active = (status == "active") %}

  <div class="card p-3 mb-3">
    <p class="mb-0">
      <strong>Status:</strong>
      {# SB Admin (Bootstrap 4) usa badge-success/badge-secondary #}
      <span class="badge {{ 'badge-success' if is_active else 'badge-secondary' }}">
        {{ status }}
      </span>
    </p>

    {% if stripe_subscription_id %}
      <p class="mb-1 mt-2"><strong>Subscription ID:</strong> {{ stripe_subscription_id }}</p>
    {% endif %}
    {% if stripe_customer_id %}
      <p class="mb-1"><strong>Customer ID:</strong> {{ stripe_customer_id }}</p>
    {% endif %}
  </div>

  {# Botones dentro del container (alineación correcta) #}
  <div class="d-flex align-items-center" style="gap: 10px;">
    <form method="post" action="/admin/{{ vendor.slug }}/billing/checkout" class="mb-0">
      <button class="btn btn-primary" type="submit">
        Pay / Active subscription
      </button>
    </form>

    <form method="post" action="/admin/{{ vendor.slug }}/billing/portal" class="mb-0">
      <button class="btn btn-outline-secondary" type="submit">
        Cancel/Admin subscription
      </button>
    </form>
  </div>

  <div class="mt-4">
    <small class="text-muted">
      Payments are processed securely with Stripe. You can manage your subscription from the portal.
    </small>
  </div>
</div>
{% endblock %}

  

  